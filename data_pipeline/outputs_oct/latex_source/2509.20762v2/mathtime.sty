% This is mathtime.sty as of 17-July-1993
%
% Copyright 1992,1993 Quixote Digital Typography
% This file may be freely redistributed as long as no changes are
% made to redistributed copies.
%
% Portions of this file are adapted from Michael Spivak's
% mtmacs.tex with his permission.
%
% For further information about services available from Quixote
% Digital Typography, call 909-621-1291 between 8am and 3pm Pacific
% Time or send e-mail to 70511.1652@compuserve.com.
%
% Do not call with support questions without reading the mathtime.sty
% FAQ which is at the end of this file.
%
% This file provides support for the MathTime fonts from The
% TeXplorators corporation. The New Font Selection Scheme for
% LaTeX is required (available from ymir.claremont.edu (North
% America) or rusinfo.rus.uni-stuttgart.de (Europe) as well as
% most other fine TeX archive sites and the TeX Users Group for
% those who do not have network access. Please see the NFSS distribution
% for instructions on installing that option.
%
% Complete Times font definitions are loaded with the following
% font names:       ptmr= Times Roman
%                   ptmri= Times Italic
%                   ptmro= Times Slanted
%                   ptmb= Times Bold
%                   ptmbi= Times Bold Italic
%                   ptmrc= Times Caps Small Caps
%                   MTMI= MathTime Math Italic
%                   MTSY= MathTime Math Symbol
%                   MTEX= MathTime Math Extension
%
% If you choose to use MathTime with another font family as per
% the instructions, it is recommended that you create a style
% option file along the lines of:
%
% \input{mathtime.sty}
% <your font definitions for text here>
%
% This allows you to acquire any changes to the basic mathtime
% definitions which appear in this file.
%
% Changelog: (Sorry, it started late)
% 28-Apr-1993 DAH Last unlogged version
% 17-Jul-1993 DAH Fixed problem with _ in input file names;
%                 math accents no longer fragile, removed
%                 references to \accentclass@, changed
%                 default values for \@MI, \@SY and \@EX
%                 to match mtplain.tex, added definitions
%                 of \varGamma, etc. for \boldmath.

\typeout{MathTime.sty as of 17 July 1993}
\typeout{Copyright 1992,1993 Quixote Digital Typography}

% The first step is to parameterize font names so that they
% can be easily changed by the user. Note the space at the
% end of each name. This is obligatory.

\def\@MN{ptmr }
\def\@MIT{ptmri }
\def\@MSL{ptmro }
\def\@BXN{ptmb }
\def\@BXIT{ptmbi }
\def\@MSC{ptmrc }
\def\@MI{MTMI }
\def\@SY{MTSY }
\def\@EX{MTEX }

% We start with \new@fontshape definitions for all the \@MN fonts.

\new@fontshape{times}{m}{n}{%
    <5>\@MN at5pt%
    <6>\@MN at6pt%
    <7>\@MN at7pt%
    <8>\@MN at8pt%
    <9>\@MN at9pt%
    <10>\@MN at10pt%
    <11>\@MN at11pt%
    <12>\@MN at12pt%
    <14>\@MN at14pt%
    <17>\@MN at17pt%
    <20>\@MN at20pt%
    <25>\@MN at25pt}{}

\new@fontshape{times}{m}{it}{%
    <5>\@MIT at5pt%
    <6>\@MIT at6pt%
    <7>\@MIT at7pt%
    <8>\@MIT at8pt%
    <9>\@MIT at9pt%
    <10>\@MIT at10pt%
    <11>\@MIT at11pt%
    <12>\@MIT at12pt%
    <14>\@MIT at14pt%
    <17>\@MIT at17pt%
    <20>\@MIT at20pt%
    <25>\@MIT at25pt}{}

\new@fontshape{times}{m}{sl}{%
    <5>\@MSL at5pt%
    <6>\@MSL at6pt%
    <7>\@MSL at7pt%
    <8>\@MSL at8pt%
    <9>\@MSL at9pt%
    <10>\@MSL at10pt%
    <11>\@MSL at11pt%
    <12>\@MSL at12pt%
    <14>\@MSL at14pt%
    <17>\@MSL at17pt%
    <20>\@MSL at20pt%
    <25>\@MSL at25pt}{}

\new@fontshape{times}{bx}{n}{%
    <5>\@BXN at5pt%
    <6>\@BXN at6pt%
    <7>\@BXN at7pt%
    <8>\@BXN at8pt%
    <9>\@BXN at9pt%
    <10>\@BXN at10pt%
    <11>\@BXN at11pt%
    <12>\@BXN at12pt%
    <14>\@BXN at14pt%
    <17>\@BXN at17pt%
    <20>\@BXN at20pt%
    <25>\@BXN at25pt}{}

\new@fontshape{times}{bx}{it}{%
    <5>\@BXIT at5pt%
    <6>\@BXIT at6pt%
    <7>\@BXIT at7pt%
    <8>\@BXIT at8pt%
    <9>\@BXIT at9pt%
    <10>\@BXIT at10pt%
    <11>\@BXIT at11pt%
    <12>\@BXIT at12pt%
    <14>\@BXIT at14pt%
    <17>\@BXIT at17pt%
    <20>\@BXIT at20pt%
    <25>\@BXIT at25pt}{}

\new@fontshape{times}{m}{sc}{%
    <5>\@MSC at5pt%
    <6>\@MSC at6pt%
    <7>\@MSC at7pt%
    <8>\@MSC at8pt%
    <9>\@MSC at9pt%
    <10>\@MSC at10pt%
    <11>\@MSC at11pt%
    <12>\@MSC at12pt%
    <14>\@MSC at14pt%
    <17>\@MSC at17pt%
    <20>\@MSC at20pt%
    <25>\@MSC at25pt}{}

% Now the MathTime fonts
    
\new@fontshape{mtmi}{m}{n}{%
    <5>\@MI at5pt%
    <6>\@MI at6pt%
    <7>\@MI at7pt%
    <8>\@MI at8pt%
    <9>\@MI at9pt%
    <10>\@MI at10pt%
    <11>\@MI at11pt%
    <12>\@MI at12pt%
    <14>\@MI at14pt%
    <17>\@MI at17pt%
    <20>\@MI at20pt%
    <25>\@MI at25pt}{}

\new@fontshape{mtsy}{m}{n}{%
    <5>\@SY at5pt%
    <6>\@SY at6pt%
    <7>\@SY at7pt%
    <8>\@SY at8pt%
    <9>\@SY at9pt%
    <10>\@SY at10pt%
    <11>\@SY at11pt%
    <12>\@SY at12pt%
    <14>\@SY at14pt%
    <17>\@SY at17pt%
    <20>\@SY at20pt%
    <25>\@SY at25pt}{}

\new@fontshape{mtex}{m}{n}{%
    <5>\@EX at5pt%
    <6>\@EX at6pt%
    <7>\@EX at7pt%
    <8>\@EX at8pt%
    <9>\@EX at9pt%
    <10>\@EX at10pt%
    <11>\@EX at11pt%
    <12>\@EX at12pt%
    <14>\@EX at14pt%
    <17>\@EX at17pt%
    <20>\@EX at20pt%
    <25>\@EX at25pt}{}
    

% A couple of font substitutions which I find helpful: bold
% small caps are replaced with medium small caps; bold slanted
% with bold italic. These are usually only relevant if you specify
% newlfont with the NFSS. Should you actually generate these tfms,
% add in appropriate \new@fontshape commands above and comment out
% these lines.

\subst@fontshape{times}{bx}{sc}{times}{m}{sc}
\subst@fontshape{times}{bx}{sl}{times}{bx}{it}

% We also insert some special commands to be executed when we load
% a font for any of the above families.

\extra@def{times}{}{}
\extra@def{mtmi}{\skewchar#1'055}{}
\extra@def{mtsy}{\skewchar#1'060}{}
\extra@def{mtex}{}{}

% Now we allow ourselves to say \mathversion{times}

\new@mathversion\mv@times

% Next we define the various font families:

\define@mathgroup\mv@times{0}{times}{m}{n}
\define@mathgroup\mv@times{1}{mtmi}{m}{n}
\define@mathgroup\mv@times{2}{mtsy}{m}{n}
\define@mathgroup\mv@times{3}{mtex}{m}{n}

% Define \cal for use within \mathversion{times}; I don't remember
% how this works and part may be redundant.

\new@mathgroup\cal@group
\define@mathgroup\mv@times\cal@group{cmsy}{m}{n} {\catcode`\= 11
\gdef\cal{\use@mathgroup \=cmsy \cal@group} }


% We store the meaning of the _ character here:
\expandafter\let\csname subscript character \string_\endcsname_

% The following definition requires _ and ^^A to be active.
\catcode`\_=\active
\catcode`\^^A=\active
% MathTime requires many redefinitions. We lock them inside of
% a definition so that we can switch back and forth between the
% standard defs and MathTime's. This is necessary so \boldmath
% and \unboldmath will work with Times. (Since MathTime doesn't
% provide bold math, we need to switch to CM for those characters.
% Since the weights are different, it's not too noticable (an
% eagle-eyed observer might catch it, but it's tough since Times
% changes from an Old Style to an almost Clarendon-like font for
% bold).)
\def\@MathTimeDefs{%
% MathTime chardefs for some Greek characters (because they're
% remapped)
  \mathchardef\Gamma="0130
  \mathchardef\Delta="0131
  \mathchardef\Theta="0132
  \mathchardef\Lambda="0133
  \mathchardef\Xi="0134
  \mathchardef\Pi="0135
  \mathchardef\Sigma="0136
  \mathchardef\Upsilon="0137
  \mathchardef\Phi="0138
  \mathchardef\Psi="0139
  \mathchardef\Omega="017F
  \mathchardef\varGamma="0100
  \mathchardef\varDelta="0101
  \mathchardef\varTheta="0102
  \mathchardef\varLambda="0103
  \mathchardef\varXi="0104
  \mathchardef\varPi="0105
  \mathchardef\varSigma="0106
  \mathchardef\varUpsilon="0107
  \mathchardef\varPhi="0108
  \mathchardef\varPsi="0109
  \mathchardef\varOmega="010A
  \mathchardef\varkappa="017E
  \mathcode`\(="412E
  \mathcode`\)="512F
  \delcode`\(="12E300
  \delcode`\)="12F301
  \mathcode`\.="013A
  \mathcode`\,="613B
  \mathchardef\ldotp="613A
  \mathchardef\triangleleft="2247
  \mathchardef\triangleright="2246
  \def\vec{\mathaccent"0245 }
  \mathchardef\comp="2242
  \mathcode`\+="2243
  \mathcode`\=="3244
  \mathchardef\Relbar="3248
  \mathcode`\;="6249
% Accents are defined two-part to avoid fragility.
  \def\pt##1{{\edef\next{\the\font}\the\textfont2\accent"41\next##1}}
  \def\t{\protect\pt}
  \def\pgrave{\ifnum\fam=\m@ne
   \mathaccent"024A \else\mathaccent"7012 \fi}
  \def\pacute{\ifnum\fam=\m@ne
   \mathaccent"024B \else\mathaccent"7013 \fi}
  \def\pcheck{\ifnum\fam=\m@ne
   \mathaccent"024C \else\mathaccent"7014 \fi}
  \def\pbreve{\ifnum\fam=\m@ne
   \mathaccent"024D \else\mathaccent"7015 \fi}
  \def\pbar{\ifnum\fam=\m@ne
   \mathaccent"024E \else\mathaccent"7016 \fi}
  \def\phat{\ifnum\fam=\m@ne
   \mathaccent"024F \else\mathaccent"705E \fi}
  \def\pdot{\ifnum\fam=\m@ne
   \mathaccent"0250 \else\mathaccent"70C7 \fi}
  \def\ptilde{\ifnum\fam=\m@ne
   \mathaccent"0251 \else\mathaccent"707E \fi}
  \def\pddot{\ifnum\fam=\m@ne
   \mathaccent"0252 \else\mathaccent"707F \fi}
  \def\grave{\protect\pgrave}
  \def\acute{\protect\pacute}
  \def\check{\protect\pcheck}
  \def\breve{\protect\pbreve}
  \def\bar{\protect\pbar}
  \def\hat{\protect\phat}
  \def\dot{\protect\pdot}
  \def\tilde{\protect\ptilde}
  \def\ddot{\protect\pddot}
  \def\widebar{\mathaccent"0253 }
  \mathchardef\dagger="20B2
  \mathchardef\ddagger="20B3
  \def\dag{\mathhexbox0B2}  
  \def\ddag{\mathhexbox0B3}
  \def\S{\mathhexbox0A7}
  \def\P{\mathhexbox0B6}
  \def\vdots{\vbox{\baselineskip4\p@ \lineskiplimit\z@
   \kern6\p@\hbox{$\m@th.$}\hbox{$\m@th.$}\hbox{$\m@th.$}}}
  \def\ddots{\mathinner{\mkern1mu\raise7\p@\vbox{\kern7\p@
   \hbox{$\m@th.$}}\mkern2mu
   \raise4\p@\hbox{$\m@th.$}\mkern2mu\raise\p@\hbox{$\m@th.$}\mkern1mu}}
  \def\hbar{{\mathchar'26\mkern-6.7muh}}
  \def\angle{{\vbox{\ialign{$\m@th\scriptstyle####$\crcr
        \not\mathrel{\mkern14mu}\crcr
        \noalign{\nointerlineskip}
        \mkern2.5mu\leaders\hrule height.48pt\hfill\mkern2.5mu\crcr}}}}
  \def\space@.{\futurelet\space@\relax}
  \space@. %                             
  \catcode`\_=\active
% DAH 1992.11.08: Fixed bug where _ was fragile in times mode
  \def_{\protect\pUS}
  \def\pUS{\ifmmode\expandafter\sb@\else
   \expandafter\csname subscript character \string_\endcsname\fi}
  \let\sb_
  \ifnum\catcode`\^^A=8 \catcode`\^^A\active\let^^A_\fi
  \def\sb@##1{\csname subscript character \string_\endcsname
   {\futurelet\next\sb@@##1}}
  \def\sb@@{%
   \ifx\next\space@\def\next@. {\futurelet\next\sb@@}\else
    \def\next@.{%
     \ifx\next j\mkern-\tw@ mu\else
     \ifx\next f\mkern-\tw@ mu\else
     \ifx\next p\mkern-\@ne mu
     \fi\fi\fi}%
   \fi
   \next@.}
  \def\jadjust{\mkern-\tw@ mu}
}

% In normal life, _ and ^^A are not active:
\catcode`\^^A=8
\catcode`\_=8

% Now we define macros to undo all of the above.
\def\@UnMathTimeDefs{%
  \mathchardef\Gamma="7000
  \mathchardef\Delta="7001
  \mathchardef\Theta="7002
  \mathchardef\Lambda="7003
  \mathchardef\Xi="7004
  \mathchardef\Pi="7005
  \mathchardef\Sigma="7006
  \mathchardef\Upsilon="7007
  \mathchardef\Phi="7008
  \mathchardef\Psi="7009
  \mathchardef\Omega="700A
  \def\varGamma{{\mit\Gamma}}
  \def\varDelta{{\mit\Delta}}
  \def\varTheta{{\mit\Theta}}
  \def\varLambda{{\mit\Lambda}}
  \def\varXi{{\mit\Xi}}
  \def\varPi{{\mit\Pi}}
  \def\varSigma{{\mit\Sigma}}
  \def\varUpsilon{{\mit\Upsilon}}
  \def\varPhi{{\mit\Phi}}
  \def\varPsi{{\mit\Psi}}
  \def\varOmega{{\mit\Omega}}
  % Mathtime has some characters not available elsewhere: we
  % make them equivalent to their unvariant versions:
  \let\varkappa=\kappa
  % Now we restore some more codes and definitions:
  \mathcode`\(="4028
  \mathcode`\)="5029
  \delcode`\(="028300
  \delcode`\)="029301
  \mathcode`\.="013A
  \mathcode`\,="613B
  \mathchardef\ldotp="613A
  \mathchardef\triangleleft="212F
  \mathchardef\triangleright="212E
  \def\vec{\mathaccent"017E}
  \def\t##1{{\edef\next{\the\font}\the\textfont1\accent"7F\next##1}}
  % \comp is a new character which we can't provide.
  \let\comp=\relax
  \mathcode`\+="202B
  \mathcode`\=="303D
  \def\Relbar{\mathrel=}
  \mathcode`\;="603B
  \def\acute{\mathaccent"7013 }
  \def\grave{\mathaccent"7012 }
  \def\ddot{\mathaccent"707F }
  \def\tilde{\mathaccent"707E }
  \def\bar{\mathaccent"7016 }
  \def\breve{\mathaccent"7015 }
  \def\check{\mathaccent"7014 }
  \def\hat{\mathaccent"705E }
  \def\dot{\mathaccent"705F }
  % Widebar is a spivakism. We let it to \bar.
  \let\widebar\bar
  \mathchardef\ddagger="227A
  \mathchardef\dagger="2279
  \def\S{\mathhexbox278}
  \def\P{\mathhexbox27B}
  \def\vdots{\vbox{\baselineskip4\p@ \lineskiplimit\z@
    \kern6\p@\hbox{.}\hbox{.}\hbox{.}}}
  \def\ddots{\mathinner{\mkern1mu\raise7\p@\vbox{\kern7\p@\hbox{.}}\mkern2mu
    \raise4\p@\hbox{.}\mkern2mu\raise\p@\hbox{.}\mkern1mu}}
  \def\hbar{{\mathchar'26\mkern-9muh}}
  \def\angle{{\vbox{\ialign{$\m@th\scriptstyle####$\crcr
      \not\mathrel{\mkern14mu}\crcr
      \noalign{\nointerlineskip}
      \mkern2.5mu\leaders\hrule height.34pt\hfill\mkern2.5mu\crcr}}}}
  \catcode`\_=8
  \catcode`\^^A=8
}

\def\unboldmath{\@nomath\boldmath
  \@MathTimeDefs
  \mathversion{times}%
}
\def\boldmath{\@nomath\unboldmath
  \@UnMathTimeDefs
  \mathversion{bold}%
}
  
\def\default@family{times}
\def\rmdefault{times}
\rm
\unboldmath

% The following fixes problems with the active underscore in input 
% file names.

\def\@iinput{%
  \chardef\@US=\catcode`\_%
  \catcode`\_=12
  \@Iinput
}
\def\@Iinput#1{%
  \@@Input #1
}

\let\@@@input\@@input
\def\@@input{%
  \charder\@US=\catcode`\_%
  \catcode`\_=12
  \@@Input
}
\def\@@Input#1{%
  \catcode`\_=12
  \@@@input #1
}

\def\@input{%
  \chardef\@US=\catcode`\_%
  \catcode`\_=12
  \@Input
}
\def\@Input#1{%
  \catcode`\_=\@US
  \openin\@ne #1
  \ifeof\@ne \typeout{No file #1.}%
  \else\closein\@ne \relax\@@input #1 \fi
}


\endinput

mathtime.sty FAQ (as of 28-Apr-1993)

* How do I get the MathTime fonts?

For information on obtaining the MathTime fonts, contact the
TeXplorator corporation. e-mail spivak@rice.edu, phone
713-524-5515, FAX 713-523-6743, postal: 1572 West Gray #377,
Houston, TX 77019-4948. They should also be available from Y&Y
and Blue Sky Research by Summer 1993.

* How to I get the new font selection scheme?

It can be FTP'd from
ymir.claremont.edu:[anonymous.tex.inputs.latex-mainz]
I don't know about non-FTP sites.

* dvips says it can't find mtex/mtsy.pk. What's wrong?

The dvips psfonts.map file is case dependent. I choose to use the
following lines in my psfonts.map file:
mtex MTEX <mtex.pso
mtsy MTSY <mtsy.pso
RMTMI MTMI <rmtmi.pso
rather than what is prescribed in the MathTime manual.
Alternatively, one can change the definitions of \@MI \@SY and
\@EX to have the uppercase names rather than lower case names.

* I switched to mathtime.sty and now LaTeX is complaining about
\label commands with _'s in them

The _ character is illegal in a reference or citation key (yes, 
the LaTeX manual _does_ say this). Change these _'s to another
character.

The fact that _ worked previously was more luck than anything
else. Modifying \label, \ref, \pageref, \cite and \bibitem to
allow _ with the mathtime definition would be too much work.


